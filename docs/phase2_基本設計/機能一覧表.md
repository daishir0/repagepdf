# 機能一覧表

## 概要
RePage PDFシステムのPhase1（MVP）における全機能を一覧化したドキュメントです。
要件定義書の機能要件（FR-001〜FR-019）に基づき、画面・API・バッチ処理の対応を明示します。

## ステータス
- **フェーズ**: 基本設計
- **作成日**: 2025-12-13
- **更新日**: 2025-12-13
- **作成者**: Claude (AIPM)
- **レビュー状況**: 未着手

---

## 内容

### 機能カテゴリ別一覧

#### 1. 認証機能

| 機能ID | 機能名 | 機能概要 | 画面 | API | 優先度 | 備考 |
|--------|--------|----------|------|-----|--------|------|
| F-001 | ログイン | メールアドレス/パスワードで認証 | ログイン画面 | POST /api/auth/login | 必須 | JWT発行 |
| F-002 | ログアウト | セッション終了 | ヘッダー | POST /api/auth/logout | 必須 | トークン無効化 |
| F-003 | セッション管理 | ログイン状態の維持・自動ログアウト | - | GET /api/auth/me | 必須 | トークン検証 |

#### 2. テンプレート管理機能

| 機能ID | 機能名 | 機能概要 | 画面 | API | 優先度 | 備考 |
|--------|--------|----------|------|-----|--------|------|
| F-004 | テンプレート作成 | テンプレート名とURL3件を入力 | テンプレート作成画面 | POST /api/templates | 必須 | |
| F-005 | URL学習処理 | URLからサイトのコーディングルールを解析・生成 | - | POST /api/templates/{id}/learn | 必須 | 非同期処理 |
| F-006 | テンプレート一覧 | 作成済みテンプレートの一覧表示 | テンプレート一覧画面 | GET /api/templates | 必須 | |
| F-007 | テンプレート詳細 | テンプレートの詳細情報表示 | テンプレート詳細画面 | GET /api/templates/{id} | 必須 | |
| F-008 | テンプレート削除 | 不要なテンプレートを削除 | テンプレート一覧画面 | DELETE /api/templates/{id} | 必須 | 確認ダイアログ |

#### 3. PDF変換機能

| 機能ID | 機能名 | 機能概要 | 画面 | API | 優先度 | 備考 |
|--------|--------|----------|------|-----|--------|------|
| F-009 | PDFアップロード | 変換対象PDFのアップロード | 変換画面 | POST /api/conversions/upload | 必須 | 最大50MB |
| F-010 | PDF解析 | PDFからテキスト・画像・表を抽出 | - | - | 必須 | コンバーター使用 |
| F-011 | 不要要素除外 | ページ番号、ヘッダー/フッター等を除外 | - | - | 必須 | 自動処理 |
| F-012 | 画像抽出 | PDF内画像をファイル化 | - | - | 必須 | ./storage保存 |
| F-013 | 表変換 | 表構造をHTMLテーブルに変換 | - | - | 必須 | |
| F-014 | HTML生成 | テンプレートルールでHTML生成 | - | POST /api/conversions/{id}/generate | 必須 | LLM使用 |

#### 4. 比較・承認機能

| 機能ID | 機能名 | 機能概要 | 画面 | API | 優先度 | 備考 |
|--------|--------|----------|------|-----|--------|------|
| F-015 | 比較画面表示 | PDF/HTMLを左右に並べて表示 | 比較画面 | GET /api/conversions/{id} | 必須 | Notionライク |
| F-016 | HTML手動編集 | 生成HTMLを画面上で編集 | 比較画面 | PATCH /api/conversions/{id} | 必須 | リアルタイムプレビュー |
| F-017 | 承認 | 変換結果を確定 | 比較画面 | POST /api/conversions/{id}/approve | 必須 | ステータス更新 |

#### 5. 出力機能

| 機能ID | 機能名 | 機能概要 | 画面 | API | 優先度 | 備考 |
|--------|--------|----------|------|-----|--------|------|
| F-018 | HTMLダウンロード | HTMLファイルをダウンロード | 比較画面 | GET /api/conversions/{id}/download | 必須 | .html形式 |
| F-019 | HTMLコピー | HTMLをクリップボードにコピー | 比較画面 | - | 必須 | フロントエンド処理 |
| F-020 | 画像ダウンロード | 抽出画像をZIPでダウンロード | 比較画面 | GET /api/conversions/{id}/images | 必須 | |

#### 6. 設定機能

| 機能ID | 機能名 | 機能概要 | 画面 | API | 優先度 | 備考 |
|--------|--------|----------|------|-----|--------|------|
| F-021 | コンバーター一覧 | 利用可能なコンバーター表示 | 設定画面 | GET /api/settings/converters | 必須 | |
| F-022 | コンバーター選択 | 使用コンバーターを選択 | 設定画面 | PUT /api/settings/converters | 必須 | |
| F-023 | APIキー設定 | LLM APIキーの設定 | 設定画面 | PUT /api/settings/api-keys | 必須 | 暗号化保存 |
| F-024 | モデル一覧 | 利用可能なLLMモデル表示 | 設定画面 | GET /api/settings/models | 必須 | Vision対応表示 |
| F-025 | モデル選択 | 使用LLMモデルを選択 | 設定画面 | PUT /api/settings/models | 必須 | OpenAI/Anthropic各1 |

---

### 機能一覧サマリー

| カテゴリ | 機能数 | 画面数 | API数 |
|----------|--------|--------|-------|
| 認証 | 3 | 1 | 3 |
| テンプレート管理 | 5 | 3 | 5 |
| PDF変換 | 6 | 1 | 2 |
| 比較・承認 | 3 | 1 | 3 |
| 出力 | 3 | 0 | 2 |
| 設定 | 5 | 1 | 5 |
| **合計** | **25** | **7** | **20** |

---

### Phase2以降の機能（参考）

| 機能ID | 機能名 | 機能概要 | 予定Phase |
|--------|--------|----------|-----------|
| F-101 | 対話型チューニング | チャットで修正指示、AIが再生成 | Phase2 |
| F-102 | WordPress連携 | REST APIで直接投稿 | Phase2 |
| F-103 | 変換履歴一覧 | 過去の変換結果を検索・表示 | Phase2 |
| F-104 | 変換結果再編集 | 保存済み結果の再編集 | Phase2 |
| F-105 | バッチ変換 | 複数PDF一括変換 | Phase2 |
| F-106 | マルチユーザー | ユーザー追加・権限管理 | Phase3 |

---

## 変更履歴
| 日付 | 版 | 変更内容 | 変更者 |
|------|-----|----------|--------|
| 2025-12-13 | 1.0 | 初版作成 | Claude (AIPM) |
| 2025-12-16 | 1.1 | F-024/F-025モデル設定機能追加、サマリー更新 | Claude (AIPM) |

---

## AIレビュー結果

### レビュー日: 2025-12-16
### レビュアー: Claude (AIPM)
### 結果: **承認（修正後）**

#### 確認項目

| 項目 | 結果 | 備考 |
|------|------|------|
| Phase1要件（FR-001〜FR-019）との整合性 | OK | 全要件をカバー |
| 機能ID採番の連続性 | OK | F-001〜F-025 |
| API一覧との整合性 | OK | 20 API（修正後） |
| 画面一覧との整合性 | OK | 7画面 |
| Phase2以降機能の分離 | OK | F-101〜F-106で分離 |

#### 修正履歴
- モデル設定機能（F-024, F-025）を追加
- サマリー更新（機能25、API 20）
